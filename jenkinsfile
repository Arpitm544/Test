pipeline {  
    agent any  
    stages {  
        stage("Dependencies") {  
            steps {  
                sh 'npm install'  
            }  
        }  
        stage("Run Server") {  
            steps {  
                // Start the server in the background
                sh 'node server.js-SNAPSHOT-1.0 &'
                echo "Server started in the background."
            }  
        }  
        stage("Test") {  
            steps {  
                sh 'npm test || echo "No tests defined"'  
            }  
        }  
        stage("Build") {  
            steps {  
                sh 'npm run build'   
            }  
        }  
    }  
}
