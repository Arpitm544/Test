pipeline {  
    agent any  
    stages {  
        stage("Dependencies") {  
            steps {  
                sh 'npm install'  
            }  
        }  
        stage("Run Server") {  
            steps {  
                script {  
                  sh 'node server.js &' 
                }  
            }  
        }  
        stage("Test") {  
            steps {  
                sh 'npm test || echo "No tests defined"'  
            }  
        }  
        stage("Build") {  
            steps {  
                echo 'npm run build'   
            }  
        }  
    }  
}
